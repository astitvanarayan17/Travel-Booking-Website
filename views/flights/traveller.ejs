<% layout("layouts/boilerplate") %>

<!-- Add custom CSS for traveller page -->
<link rel="stylesheet" href="/stylesheets/traveller-styles.css">

<div class="traveller-container">
    <!-- Header -->
    <div class="traveller-header">
        <h1>Passenger Details</h1>
        <p>Please enter passenger information as it appears on government-issued ID</p>
    </div>

    <div class="form-container">
        <!-- Main Form -->
        <div class="form-main">
            <form action="/traveller" method="post">
                <!-- Passenger Forms -->
                <% for (let index = 0; index < detail.passengerCount; index++) { %>
                    <div class="passenger-card">
                        <div class="passenger-header">
                            <div class="passenger-number"><%= index + 1 %></div>
                            <div class="passenger-title">Passenger <%= index + 1 %></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Title</label>
                            <div class="gender-options">
                                <input type="radio" name="group[<%= index %>]" id="mr<%= index %>" value="Mr." class="gender-radio" checked>
                                <label for="mr<%= index %>" class="gender-label">Mr.</label>
                                
                                <input type="radio" name="group[<%= index %>]" id="mrs<%= index %>" value="Ms." class="gender-radio">
                                <label for="mrs<%= index %>" class="gender-label">Ms.</label>
                                
                                <input type="radio" name="group[<%= index %>]" id="mrs<%= index %>" value="Mrs." class="gender-radio">
                                <label for="mrs<%= index %>" class="gender-label">Mrs.</label>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group" style="flex: 2;">
                                <label for="fname<%= index %>" class="form-label">First Name</label>
                                <input type="text" id="fname<%= index %>" name="fname[<%= index %>]" 
                                       class="form-control" placeholder="Enter first name" required>
                            </div>
                            
                            <div class="form-group" style="flex: 2;">
                                <label for="lname<%= index %>" class="form-label">Last Name</label>
                                <input type="text" id="lname<%= index %>" name="lname[<%= index %>]" 
                                       class="form-control" placeholder="Enter last name" required>
                            </div>
                        </div>
                    </div>
                <% } %>

                <!-- Contact Information -->
                <div class="contact-section">
                    <div class="contact-header">
                        <div class="contact-icon">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="contact-title">Contact Information</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="mobile" class="form-label">Mobile Number</label>
                            <div style="display: flex;">
                                <select class="form-control" style="width: 90px; margin-right: 10px;">
                                    <option>+91</option>
                                    <option>+1</option>
                                    <option>+44</option>
                                </select>
                                <input type="tel" id="mobile" name="mobile" class="form-control" 
                                       placeholder="Enter mobile number" required>
                            </div>
                            <small style="color: #64748b; font-size: 0.75rem;">For booking updates</small>
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" id="email" name="email" class="form-control" 
                                   placeholder="Enter email address" required>
                            <small style="color: #64748b; font-size: 0.75rem;">E-ticket will be sent here</small>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <a href="/flights/review" class="btn btn-outline">
                        <i class="fas fa-arrow-left btn-icon"></i> Back
                    </a>
                    <button type="submit" class="btn btn-primary">
                        Continue to Payment <i class="fas fa-arrow-right btn-icon"></i>
                    </button>
                </div>
            </form>
        </div>

        <!-- Sidebar -->
        <div class="booking-sidebar">
            <!-- Progress -->
            <div class="fare-summary">
                <div class="progress" style="height: 6px; background: #e2e8f0; border-radius: 3px; margin-bottom: 1.5rem;">
                    <div class="progress-bar" role="progressbar" style="width: 75%; background: #2563eb;" 
                         aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                    <span style="font-size: 0.875rem; color: #64748b;">Step 3 of 4</span>
                    <span style="font-size: 0.875rem; font-weight: 500;">Passenger Details</span>
                </div>
            </div>

            <!-- Fare Summary -->
            <div class="fare-summary">
                <div class="fare-header">Fare Summary</div>
                <div class="fare-item">
                    <span>Base Fare (x<%= detail.passengerCount %>)</span>
                    <span>₹<%= (detail.price - 489) * detail.passengerCount %></span>
                </div>
                <div class="fare-item">
                    <span>Fee & Taxes</span>
                    <span>₹<%= 420 * detail.passengerCount %></span>
                </div>
                <div class="fare-item">
                    <span>Other Charges</span>
                    <span>₹<%= 69 * detail.passengerCount %></span>
                </div>
                <div class="fare-total">
                    <div>
                        <strong>Total Amount</strong>
                        <div style="font-size: 0.875rem; color: #64748b;">Incl. all taxes</div>
                    </div>
                    <strong>₹<%= detail.price * detail.passengerCount %></strong>
                </div>
            </div>

            <!-- Secure Booking -->
            <div class="fare-summary" style="text-align: center; padding: 1.5rem;">
                <div style="width: 48px; height: 48px; background: #e0f2fe; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="fas fa-lock" style="color: #0ea5e9; font-size: 1.25rem;"></i>
                </div>
                <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: #1e293b;">Secure Booking</h3>
                <p style="font-size: 0.875rem; color: #64748b; margin-bottom: 0;">Your personal information is protected with 256-bit SSL encryption.</p>
            </div>
        </div>
    </div>
</div>